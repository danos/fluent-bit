#!/usr/bin/make -f

# Restore pre-GCC 10 behavior
export DEB_CFLAGS_MAINT_APPEND = -fcommon

%:
	dh $@ --buildsystem=cmake

override_dh_auto_configure:

	dh_auto_configure -- -DCMAKE_INSTALL_PREFIX=/opt/td-agent-bit/ -DCMAKE_INSTALL_SYSCONFDIR=/etc/ -DFLB_DEBUG=ON -DFLB_IN_ZMQ=ON -DFLB_IN_CPU=OFF -DFLB_IN_DISK=OFF -DFLB_IN_EXEC=OFF -DFLB_IN_FORWARD=OFF -DFLB_IN_HEALTH=OFF -DFLB_IN_MEM=OFF -DFLB_IN_KMSG=OFF -DFLB_IN_LIB=OFF -DFLB_IN_RANDOM=OFF -DFLB_IN_SERIAL=OFF -DFLB_IN_SYSLOG=OFF -DFLB_IN_TCP=OFF -DFLB_IN_MQTT=OFF -DFLB_IN_HEAD=OFF -DFLB_IN_PROC=OFF -DFLB_IN_SYSTEMD=OFF -DFLB_IN_DUMMY=OFF -DFLB_IN_NETIF=OFF -DFLB_TD=1 -DFLB_WITHOUT_EXAMPLES=On -DFLB_HTTP_SERVER=On -DFLB_OUT_KAFKA=On -DFLB_OUT_AZURE=OFF -DFLB_OUT_BIGQUERY=OFF -DFLB_OUT_ES=OFF -DFLB_OUT_EXIT=OFF -DFLB_OUT_FORWARD=OFF -DFLB_OUT_GELF=OFF -DFLB_OUT_HTTP=OFF -DFLB_OUT_INFLUXDB=OFF -DFLB_OUT_NATS=OFF -DFLB_OUT_PLOT=OFF -DFLB_OUT_TD=OFF -DFLB_OUT_SPLUNK=OFF -DFLB_OUT_STACKDRIVER=OFF -DFLB_OUT_LIB=OFF -DFLB_OUT_NULL=OFF -DFLB_OUT_FLOWCOUNTER=OFF -DFLB_OUT_KAFKA_REST=OFF -DFLB_FILTER_GREP=OFF -DFLB_FILTER_MODIFY=OFF -DFLB_FILTER_STDOUT=OFF -DFLB_FILTER_KUBERNETES=OFF -DFLB_FILTER_THROTTLE=OFF -DFLB_FILTER_NEST=OFF -DFLB_FILTER_LUA=OFF -DFLB_FILTER_RECORD_MODIFIER=OFF -DFLB_LUAJIT=OFF -DFLB_STREAM_PROCESSOR=OFF -DFLB_OUT_DATADOG=OFF
